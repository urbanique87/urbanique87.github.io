3:I[4707,[],""]
6:I[6423,[],""]
7:I[8087,["972","static/chunks/972-1dbf1ef7026efe61.js","185","static/chunks/app/layout-fc049b8ba3ff4c4c.js"],"GoogleTagManager"]
8:I[7955,["972","static/chunks/972-1dbf1ef7026efe61.js","185","static/chunks/app/layout-fc049b8ba3ff4c4c.js"],"default"]
9:I[4888,["972","static/chunks/972-1dbf1ef7026efe61.js","185","static/chunks/app/layout-fc049b8ba3ff4c4c.js"],"GoogleAnalytics"]
4:["category","frontend","d"]
5:["slug","20241118_nextauth","d"]
0:["fL74k-rNd5x-lLvSHMVMH",[[["",{"children":["posts",{"children":[["category","frontend","d"],{"children":[["slug","20241118_nextauth","d"],{"children":["__PAGE__?{\"category\":\"frontend\",\"slug\":\"20241118_nextauth\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["category","frontend","d"],{"children":[["slug","20241118_nextauth","d"],{"children":["__PAGE__",{},[["$L1","$L2",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/fd630683d467c7dc.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/9b708f2b186acac9.css","precedence":"next","crossOrigin":"$undefined"}]]],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$4","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/354532eb11cf5fad.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":[["$","link",null,{"rel":"stylesheet","as":"style","crossOrigin":"anonymous","href":"https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css"}],["$","$L7",null,{"gtmId":"GTM-TPP4K84Z"}]]}],["$","body",null,{"children":[["$","$L8",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}],["$","$L9",null,{"gaId":"G-KJHY5R4DCG"}]]}]]}]],null],null],["$La",null]]]]
b:I[3706,["210","static/chunks/app/posts/%5Bcategory%5D/%5Bslug%5D/page-666dcf2419a8ec86.js"],"default"]
2:["$","main",null,{"children":["$","article",null,{"children":[["$","header",null,{"className":"PostDetail_post-detail__header__zshZb","children":[["$","h1",null,{"children":"NextAuth - UntrustedHost 이해하기"}],["$","time",null,{"className":"PostDetail_post-detail__date__9juxR","dateTime":"2024-11-18","children":"18 Nov 2024"}]]}],["$","div",null,{"className":"markdown","children":[["$","h2",null,{"id":"문제-상황","children":"문제 상황"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"NextAuth.js v5"}],"를 사용하여 인증을 구현하던 중,",["$","br",null,{}],"\n","로컬 환경에서 프로덕션 모드로 실행시 다음과 같은 오류 메시지가 발생했습니다."]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"bash","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"bash","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" [tk: Host must be trusted. URL was: http://localhost:3000/api/auth/session. Read more at https://errors.authjs.dev#untrustedhost] {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":"  name:"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" 'tk',"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"  type"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" 'UntrustedHost',"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":"  kind:"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" 'error'"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"} []"}]}]]}]}]}],"\n",["$","h2",null,{"id":"해결-방법","children":"해결 방법"}],"\n",["$","h3",null,{"id":"trusthost-옵션-설정하기","children":"TrustHost 옵션 설정하기"}],"\n",["$","p",null,{"children":"이 오류는 다음 두 가지 방법 중 하나로 해결할 수 있습니다."}],"\n",["$","p",null,{"children":["🔗 ",["$","a",null,{"href":"https://authjs.dev/reference/core/errors#untrustedhost","children":"Auth.js - UntrustedHost"}]]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"NextAuth 설정에서 직접 설정"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"tsx","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"tsx","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"export"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" authConfig"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  ..."}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"  trustHost: "}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"true"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  ..."}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"환경 변수로 설정"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"tsx","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"tsx","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"AUTH_TRUST_HOST"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"TRUE"}]]}]}]}]}],"\n"]}],"\n"]}],"\n",["$","p",null,{"children":"이제 이 오류가 발생하는 원인에 대해 좀 더 깊이 살펴보겠습니다."}],"\n",["$","h2",null,{"id":"기술적-배경","children":"기술적 배경"}],"\n",["$","h3",null,{"id":"auth_trust_host란","children":[["$","strong",null,{"children":"AUTH_TRUST_HOST"}],"란?"]}],"\n",["$","p",null,{"children":["공식 문서에 따르면, ",["$","strong",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"AUTH_TRUST_HOST"}]}]}]}]}]," 환경 변수는 다음과 같이 설명되어 있습니다."]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["When deploying your application behind a reverse proxy, you’ll need to set ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"AUTH_TRUST_HOST"}]}]}]}]," equal to true. This tells Auth.js to trust the ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"X-Forwarded-Host"}]}]}]}]," header from the reverse proxy. Auth.js will automatically infer this to be true if we detect the environment variable indicating that your application is running on one of the supported hosting providers. Currently VERCEL and CF_PAGES (Cloudflare Pages) are supported."]}],"\n"]}],"\n",["$","p",null,{"children":["AUTH_TRUST_HOST 설정은 리버스 프록시 환경에서 특히 중요합니다.",["$","br",null,{}],"\n","이 설정이 필요한 주요 상황은 다음과 같습니다."]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"리버스 프록시 사용 시"}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"X-Forwarded-Host"}]}]}]}]," 헤더를 사용하는 환경"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"특정 호스팅 제공업체 사용 시"}],"\n"]}],"\n"]}],"\n",["$","h3",null,{"id":"자동-활성화-환경","children":"자동 활성화 환경"}],"\n",["$","p",null,{"children":["다음 호스팅 환경에서는 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"AUTH_TRUST_HOST"}]}]}]}],"가 자동으로 활성화됩니다."]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Vercel"}],"\n",["$","li",null,{"children":"Cloudflare Pages"}],"\n"]}],"\n",["$","h3",null,{"id":"x-forwarded-host-헤더의-역할","children":["$","strong",null,{"children":"X-Forwarded-Host 헤더의 역할"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"클라이언트의 원래 요청 호스트 정보를 포함"}],"\n",["$","li",null,{"children":"리버스 프록시 환경에서 중요한 역할"}],"\n",["$","li",null,{"children":"로드 밸런서나 프록시 서버에서 주로 사용"}],"\n"]}],"\n",["$","h2",null,{"id":"로컬-환경에서의-untrustedhost-오류","children":["로컬 환경에서의 ",["$","strong",null,{"children":"UntrustedHost"}]," 오류"]}],"\n",["$","h3",null,{"id":"발생-원인","children":"발생 원인"}],"\n",["$","p",null,{"children":["로컬 환경에서 프로덕션 모드 실행 시 ",["$","strong",null,{"children":"UntrustedHost 오류가 발생하는 이유"}]]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["Next.js의 내부 동작","\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["리버스 프록시가 없어도 ",["$","strong",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"X-Forwarded-Host"}]}]}]}]}]," 헤더 자동 설정"]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["NextAuth의 보안 정책","\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"프로덕션 환경에서 호스트 검증 수행"}],"\n",["$","li",null,{"children":"명시적인 신뢰 설정 요구"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h3",null,{"id":"nextauth의-내부-동작","children":"NextAuth의 내부 동작"}],"\n",["$","p",null,{"children":"NextAuth v5의 코드를 살펴보면 다음과 같은 로직으로 작동합니다."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"tsx","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"tsx","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#768390","--shiki-light":"#6A737D"},"children":"// node_modules/@auth/core/src/lib/utils/env.ts"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"  config.trustHost "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"??="}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" !!"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    envObject."}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"AUTH_URL"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ??"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    envObject."}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"AUTH_TRUST_HOST"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ??"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    envObject."}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"VERCEL"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ??"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    envObject."}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"CF_PAGES"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ??"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    envObject."}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"NODE_ENV"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" !=="}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \"production\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"  )"}]}]]}]}]}],"\n",["$","p",null,{"children":"이 코드는 다음 조건들을 확인하여 trustHost 값을 결정합니다."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"AUTH_URL 존재 여부"}],"\n",["$","li",null,{"children":"AUTH_TRUST_HOST 설정"}],"\n",["$","li",null,{"children":"Vercel 환경"}],"\n",["$","li",null,{"children":"Cloudflare Pages 환경"}],"\n",["$","li",null,{"children":"개발 환경 여부"}],"\n"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"tsx","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"tsx","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#768390","--shiki-light":"#6A737D"},"children":"// node_modules/@auth/core/src/lib/utils/assert.ts"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"export"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" function"}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" assertConfig"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#E36209"},"children":"request"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#E36209"},"children":"options"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    const"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" { "}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"url"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" } "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" request;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" warnings"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" [];"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    if"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"!"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"warned "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"&&"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" options.debug)"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"        warnings."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"push"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"debug-enabled\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    if"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"!"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"options.trustHost) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"        return"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" new"}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" UntrustedHost"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"`Host must be trusted. URL was: ${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"request"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"."}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"url"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}`"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    "}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    ..."}]}]]}]}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"X-Forwarded-Host"}]," 헤더를 사용하는 코드"]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"tsx","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"tsx","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#768390","--shiki-light":"#6A737D"},"children":"// node_modules/@auth/core/src/lib/utils/env.ts "}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"export"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" function"}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" createActionURL"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#E36209"},"children":"  action"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":" AuthAction"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#E36209"},"children":"  protocol"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" string"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#E36209"},"children":"  headers"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":" Headers"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#E36209"},"children":"  envObject"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" any"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#E36209"},"children":"  config"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":" Pick"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"<"}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":"AuthConfig"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"basePath\""}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" |"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \"logger\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":" URL"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" basePath"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" config?.basePath"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" envUrl"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" envObject."}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"AUTH_URL"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ??"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" envObject."}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"NEXTAUTH_URL"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  let"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" url"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"--shiki-dark":"#F69D50","--shiki-light":"#6F42C1"},"children":" URL"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  if"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" (envUrl) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    url "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" new"}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" URL"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"(envUrl)"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    if"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" (basePath "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"&&"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" basePath "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"!=="}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \"/\""}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" &&"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" url.pathname "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"!=="}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \"/\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"      if"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" (url.pathname "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"!=="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" basePath) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"        const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" logger"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" setLogger"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"(config)"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"        logger."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"warn"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"env-url-basepath-mismatch\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"      url.pathname "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \"/\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"  } "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"else"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" detectedHost"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" headers."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"x-forwarded-host\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"??"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" headers."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"host\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" detectedProtocol"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"      headers."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"x-forwarded-proto\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"??"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" protocol "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"??"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \"https\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" _protocol"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" detectedProtocol."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"endsWith"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\":\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"      ?"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" detectedProtocol"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"      :"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" detectedProtocol "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"+"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \":\""}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"    url "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" new"}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" URL"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"`${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"_protocol"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}//${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"detectedHost"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}`"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#768390","--shiki-light":"#6A737D"},"children":"  // remove trailing slash"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" sanitizedUrl"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" url."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"toString"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"()."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"replace"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"/"}],["$","span",null,{"style":{"--shiki-dark":"#8DDB8C","--shiki-dark-font-weight":"bold","--shiki-light":"#22863A","--shiki-light-font-weight":"bold"},"children":"\\/"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"$$"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"/"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  if"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" (basePath) {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#768390","--shiki-light":"#6A737D"},"children":"    // remove leading and trailing slash"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" sanitizedBasePath"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" basePath?."}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":"replace"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"/("}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"^"}],["$","span",null,{"style":{"--shiki-dark":"#8DDB8C","--shiki-dark-font-weight":"bold","--shiki-light":"#22863A","--shiki-light-font-weight":"bold"},"children":"\\/"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"|"}],["$","span",null,{"style":{"--shiki-dark":"#8DDB8C","--shiki-dark-font-weight":"bold","--shiki-light":"#22863A","--shiki-light-font-weight":"bold"},"children":"\\/"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"$$"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":")/"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"g"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"\"\""}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"??"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":" \"\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" new"}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" URL"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"`${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"sanitizedUrl"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}/${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"sanitizedBasePath"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}/${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"action"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}`"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"  return"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" new"}],["$","span",null,{"style":{"--shiki-dark":"#DCBDFB","--shiki-light":"#6F42C1"},"children":" URL"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"`${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"sanitizedUrl"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}/${"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"action"}],["$","span",null,{"style":{"--shiki-dark":"#96D0FF","--shiki-light":"#032F62"},"children":"}`"}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}]]}]}]}],"\n",["$","p",null,{"children":"음..?"}],"\n",["$","p",null,{"children":["이 코드는 ",["$","strong",null,{"children":["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"X-Forwarded-Host"}]}]}]}]}]," 헤더를 사용하여 URL을 생성하는 용도로만 사용됩니다."]}],"\n",["$","p",null,{"children":"작성된 공식 문서를 보았을 때, 아마 v5 이전 버전에는 x-forwarded-host 와 실제 host를 비교하는 보안 검증이 있었던 것 같습니다."}],"\n",["$","h2",null,{"id":"실제-적용-가이드","children":"실제 적용 가이드"}],"\n",["$","h3",null,{"id":"로컬-개발-환경","children":"로컬 개발 환경"}],"\n",["$","p",null,{"children":["개발 환경에서는 별도 설정이 필요 없습니다. (",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"NODE_ENV !== \"production\""}]}]}]}]," 조건으로 인해)"]}],"\n",["$","h3",null,{"id":"로컬-프로덕션-테스트","children":"로컬 프로덕션 테스트"}],"\n",["$","p",null,{"children":"다음 중 한 가지 방법으로 설정하세요."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"tsx","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"tsx","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#768390","--shiki-light":"#6A737D"},"children":"// .env"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"# 환경 변수 설정"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"AUTH_TRUST_HOST"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"TRUE"}]]}]]}]}]}],"\n",["$","p",null,{"children":"또는"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"tabIndex":"0","data-language":"tsx","data-theme":"github-dark-dimmed github-light","children":["$","code",null,{"data-language":"tsx","data-theme":"github-dark-dimmed github-light","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#768390","--shiki-light":"#6A737D"},"children":"// NextAuth 설정"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":"export"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" const"}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":" authConfig"}],["$","span",null,{"style":{"--shiki-dark":"#F47067","--shiki-light":"#D73A49"},"children":" ="}],["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"  trustHost: "}],["$","span",null,{"style":{"--shiki-dark":"#6CB6FF","--shiki-light":"#005CC5"},"children":"true"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"--shiki-dark":"#ADBAC7","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"id":"실제-프로덕션-환경","children":"실제 프로덕션 환경"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Vercel/Cloudflare Pages","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"추가 설정 불필요 (자동 활성화)"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["기타 호스팅 환경","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"환경에 맞는 적절한 trustHost 설정 필요"}],"\n",["$","li",null,{"children":"리버스 프록시 사용 시 반드시 활성화"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h2",null,{"id":"결론","children":"결론"}],"\n",["$","p",null,{"children":"NextAuth v5에서의 UntrustedHost 메시지는 보안을 위한 호스트 검증 절차의 일부입니다."}],"\n",["$","p",null,{"children":["이는 이전 버전과 달리(추측) ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"X-Forwarded-Host"}]}]}]}]," 헤더 검증과는 직접적인 관련이 없으며, 환경 변수나 설정을 통해 제어됩니다."]}],"\n",["$","p",null,{"children":["특히 로컬에서 프로덕션 모드 테스트 시에는 ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed github-light","children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"AUTH_TRUST_HOST=true"}]}]}]}]," 설정으로 해결할 수 있으며, 실제 배포 환경에서는 해당 환경에 맞는 적절한 설정을 사용하면 됩니다."]}]]}],["$","hr",null,{"className":"Divider_divider__iotiM"}],["$","$Lb",null,{}]]}]}]
a:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"NextAuth - UntrustedHost 이해하기"}],["$","meta","3",{"name":"description","content":"NextAuth.js v5에서 마주치는 UntrustedHost 오류의 원인과 해결 방법을 알아봅니다. trustHost 옵션 설정부터 X-Forwarded-Host 헤더의 역할, 그리고 로컬 환경과 프로덕션 환경에서의 올바른 설정 방법까지 자세히 다룹니다."}]]
1:null
